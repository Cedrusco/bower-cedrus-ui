/*!
 * Cedrus UI
 * https://github.com/cedrusco/cedrus-ui
 * @license Copyright Cedrus 2016
 * v0.3.6
 */
!function(t,e,n){"use strict";function i(t,e){if(e.isSelected)t.push(e.value);else{var n=t.indexOf(e.value);n>-1&&t.splice(n,1)}return t}e.module("cedrus.ui",["ng","ngAnimate","ngAria","cedrus.ui.core","cedrus.ui.components.calendar","cedrus.ui.components.constant","cedrus.ui.components.chart","cedrus.ui.components.dateRangePicker","cedrus.ui.components.cdGroupedBarChart","cedrus.ui.components.sidebarFilter","cedrus.ui.components.export"]);var o;!function(t){e.module("cedrus.ui.core",["ngMaterial"])}(o||(o={}));var o;!function(t){function n(t,e,n){e.setDefaultDateFormat("MM/dd/yyyy")}n.$inject=["$provide","$cedrusUIConfigProvider","$mdThemingProvider"],e.module("cedrus.ui.core").config(n)}(o||(o={}));var o;!function(t){var n=function(){function t(){}return t.capitalize=function(t,e){function n(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}var i=e?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return t?t.replace(i,n):""},t}();e.module("cedrus.ui.core").filter("capitalize",function(){return n.capitalize})}(o||(o={}));var o;!function(t){var n=function(){function t(){this.CSS={SAMPLE:"1"}}return t}();e.module("cedrus.ui.core").service("$cedrusConstant",n)}(o||(o={}));var o;!function(t){var n=function(){function t(){}return t.normalizeCamelCase=function(t,e){var n=t.replace(/([a-z])([A-Z])/g,"$1 $2");return n},t}();e.module("cedrus.ui.core").filter("normalizeCamelCase",function(){return n.normalizeCamelCase})}(o||(o={}));var o;!function(t){var n=function(){function t(){this._UI_DEFAULT_DATE_FORMAT="MM/dd/yyyy",this.dateFormat=this._UI_DEFAULT_DATE_FORMAT}return t.prototype.$get=function(){return{getDateFormat:this.getDefaultDateFormat}},t.prototype.setDefaultDateFormat=function(t){this.dateFormat=t||this._UI_DEFAULT_DATE_FORMAT},t.prototype.getDefaultDateFormat=function(){return this.dateFormat||this._UI_DEFAULT_DATE_FORMAT},t}();t.UIConfigProvider=n,e.module("cedrus.ui.core").provider("$cedrusUIConfig",n)}(o||(o={}));var o;!function(n){var i=function(){function n(){this.isDebug=!0,this.now=t.performance?e.bind(t.performance,t.performance.now):Date.now||function(){return(new Date).getTime()}}return n.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.isDebug&&console.debug.apply(console,["Cedrus UI:"].concat(e))},n.prototype.time=function(t){var e=this.now();return t(),this.now()-e},n}();e.module("cedrus.ui.core").factory("$cedrusUtil",function(){return i})}(o||(o={}));var r;!function(t){var n=function(){function t(){this.templateUrl="components/calendar/calendar.tpl.html",this.controllerAs="vm",this.controller="CalendarController",this.bindings={options:"="},this.require={ngModel:"ngModel"}}return t}();t.CalendarComponent=n,e.module("cedrus.ui.components.calendar",[]).component("cdCalendar",new n)}(r||(r={}));var a;!function(t){var n;!function(t){var n;!function(t){var n;!function(t){var n=function(){function t(t){var e=this;this.$injector=t,this.restrict="EA",this.scope={name:"@?",key:"@?",replace:"@?"},this.link=function(t,n,i){var o,r="true"===i.replace,a=i.cdConstant||i.name,s=i.key;i.name&&!a&&console.error("constant name is not provided"),a&&(o="string"==typeof a?e.$injector.get(a):a,null!=s&&""!==s?o=s.split(".").reduce(function(t,e){return t[e]},o):i.key&&console.warn("constant key is defined without a value"),r===!0?n.replaceWith(o):n.text(o))}}return t}();n.$inject=["$injector"],n.factory=function(){function t(t){return new n(t)}return t.$inject=["$injector"],t},e.module("cedrus.ui.components.constant",[]).directive("cdConstant",n.factory())}(n=t.constant||(t.constant={}))}(n=t.components||(t.components={}))}(n=t.ui||(t.ui={}))}(a||(a={}));var s;!function(t){var n=function(){function t(t,e){var n=this;this.$element=t,this.$injector=e,this.defaultOptions={width:360,height:360},this.drawSettings={},this.chartTypes={pieChart:"pieChartService",lineChart:"lineChartService"},this.drawChart=function(t){n.chartService&&(t&&(n.chartService.mergeEvents(n.options),n.chartService.definePosition(n.options,n.drawSettings,n.svg),n.chartService.prepareOptions(n.svg,n.data,n.options,n.drawSettings)),n.chartService.draw(n.svg,n.data,n.options,n.drawSettings),n.options.series&&n.options.series.forEach(function(t,e){var i=t.visible!==!1,o=i?n.data[t.dataset]:[];n.chartService.drawSeries(n.svg,o,n.options,n.drawSettings,e)}))},this.width=this.defaultOptions.width,this.height=this.defaultOptions.height,this.element=d3.select(this.$element[0]),this.svg=d3.select(this.$element[0]).select("svg").attr("width",this.width).attr("height",this.height)}return t.$inject=["$element","$injector"],t.prototype.$onInit=function(){this.options=e.merge({},this.defaultOptions,this.options),this.width=this.options.width,this.height=this.options.height,this.svg.attr("width",this.width).attr("height",this.height),this.chartTypes[this.options.chartType]?this.chartService=this.$injector.get(this.chartTypes[this.options.chartType]):"custom"===this.options.chartType?(this.chartService=this.$injector.get(this.options.customChartService),this.chartService||console.warn("No custom chart service provided for custom chart type")):console.warn("Service for chart type: "+this.options.chartType+" not found"),this.drawChart(!0)},t.prototype.$onChanges=function(t){var e=!!t.options;this.drawChart(e)},t}();n.$inject=["$element","$injector"];var i=function(){function t(){this.bindings={data:"<",options:"<"},this.template='<div>\n            <div class="custom-overlay">\n                <div ng-if="vm.options.customHTMLoverlay" ng-include="vm.options.customHTMLoverlay">\n                </div>\n            </div>\n            <svg></svg>\n        </div>',this.controller=n,this.controllerAs="vm"}return t}();e.module("cedrus.ui.components.chart",[]).component("cdChart",new i);var o=function(){function t(){var t=this;this.padding=40,this.legendRectSize=12,this.legendSpacing=4,this.scaleMap={linear:d3.scaleLinear(),log:d3.scaleLog(),ordinal:d3.scaleOrdinal()},this.createTooltip=function(e,n,i,o){o=n.tooltip&&n.tooltip.customText?t.createAccessor(n.tooltip.customText,"tooltip data accessor"):t.createAccessor("value","tooltip data accessor");var r=d3.tip();return r.attr("class","cd-chart d3-tip"),r.html(function(t){return o(t)}),n.tooltip&&n.tooltip.position&&r.direction(n.tooltip.position),e.call(r),t.events.mouseover.push(r.show),t.events.mouseout.push(r.hide),i.tip||(i.tip=r),r}}return t.prototype.mergeEvents=function(t){if(t){var e={mouseout:[],mouseover:[]};t.events&&Object.keys(t.events).forEach(function(n){"bind"!==n&&(e[n]||(e[n]=[]),e[n].push(t.events[n]))}),this.events=e}},t.prototype.createAccessor=function(t,e){return t||console.warn("Must Provide a Key for property: "+e),"function"==typeof t?function(e,n,i){return e.data&&(e=e.data),t(e,n,i)}:function(e){return e[t]}},t.prototype.attachListenters=function(t,n,i){var o=Object.keys(n);o.forEach(function(o){t.on(o,function(t,r,a){var s=this,l=e.copy(d3.event);Array.isArray(n[o])||(n[o]=[n[o]]),n[o].forEach(function(e,n){i?e.bind(s)(t,r,a,l):e(t,r,a,l)})})})},t}();o.$inject=["$scope"],t.DrawService=o}(s||(s={}));var a;!function(t){var n;!function(t){var n;!function(t){var n;!function(t){var n=function(){function t(){this.bindings={options:"<?",ngModel:"<",ngChange:"&?"},this.require={ngModel:"ngModel"},this.templateUrl="components/date-range-picker/date-range-picker.tpl.html",this.controller="CdDateRangePicker",this.controllerAs="vm"}return t}();e.module("cedrus.ui.components.dateRangePicker",[]).component("cdDateRangePicker",new n)}(n=t.dateRangePicker||(t.dateRangePicker={}))}(n=t.components||(t.components={}))}(n=t.ui||(t.ui={}))}(a||(a={}));var l;!function(t){var n=function(){function t(){this.bindings={data:"=",options:"="},this.templateUrl="components/grouped-bar-chart/grouped-bar-chart.tpl.html",this.controller="groupedBarChartController",this.controllerAs="vm",this.transclude=!0}return t}();e.module("cedrus.ui.components.cdGroupedBarChart",[]).component("cdGroupedBarChart",new n)}(l||(l={}));var a;!function(t){var n;!function(t){var n;!function(t){var n;!function(t){var n=function(){function t(){this.templateUrl="components/sidebar-filter/sidebar-filter.tpl.html",this.controllerAs="vm",this.controller="SidebarFilterController",this.bindings={options:"<",customFields:"<?"}}return t}();e.module("cedrus.ui.components.sidebarFilter",[]).component("cdSidebarFilter",new n)}(n=t.sidebarFilter||(t.sidebarFilter={}))}(n=t.components||(t.components={}))}(n=t.ui||(t.ui={}))}(a||(a={}));var r;!function(t){var n=function(){function t(t){this.$element=t,this.yearMap=[[-4,-3,-2],[-1,0,1],[2,3,4],[5,6,7]],this.monthMap=[[{display:"Jan",value:"January"},{display:"Feb",value:"February"},{display:"Mar",value:"March"}],[{display:"Apr",value:"April"},{display:"May",value:"May"},{display:"Jun",value:"June"}],[{display:"Jul",value:"July"},{display:"Aug",value:"August"},{display:"Sep",value:"September"}],[{display:"Oct",value:"October"},{display:"Nov",value:"November"},{display:"Dec",value:"December"}]]}return t.$inject=["$element"],t.prototype.$onInit=function(){this.initYear=(new Date).getFullYear(),this.date={selYear:this.initYear,selMonth:""},this.showCal=!1},t.prototype.$postLink=function(){this.inputEl=this.$element.find("input"),this.options&&this.options.blockFreeTyping===!0&&this.inputEl.keydown(function(t){t.preventDefault()})},t.prototype.displayCal=function(){this.showCal=!this.showCal,this.showCal&&this.inputEl.focus()},t.prototype.flipCal=function(){this.yearSel=!this.yearSel},t.prototype.setYear=function(t){this.date.selYear||(this.date.selYear=this.initYear),this.date.selYear+=t},t.prototype.setMonth=function(t){this.date.selYear||(this.date.selYear=this.initYear),this.date.selMonth=t,this.ngModel.$setViewValue(this.date.selMonth+" "+this.date.selYear),this.ngModel.$render(),this.selection=this.ngModel.$viewValue,this.showCal=!1},t}();n.$inject=["$element"],t.CalendarController=n,e.module("cedrus.ui.components.calendar").controller("CalendarController",n)}(r||(r={}));var s;!function(t){var n=function(){function t(){this.chartBuilt=!1}return t.prototype.draw=function(t,e,n){var i={top:30,right:30,bottom:40,left:80},o=n.height-i.top-i.bottom,r=n.width-i.left-i.right,a="",s="";this.chartBuilt||(t=t.append("g").attr("transform","translate("+i.left+","+i.top+")"),this.xAxis=d3.select("svg").append("g").attr("transform","translate("+i.left+","+i.top+")").attr("class","xAxis"),this.yAxis=d3.select("svg").append("g").attr("transform","translate("+i.left+","+(o+i.top)+")").attr("class","yAxis"),this.chartBuilt=!0);var l=d3.scaleLinear().domain([0,d3.max(e,function(t){return t[s]})]).range([0,o]),c=d3.scaleBand().domain(e.map(function(t){return t[a]})).rangeRound([0,r]).paddingInner(.05).paddingOuter(.05),d=(d3.scaleLinear().domain([0,d3.max(e,function(t){return t[s]})]).range(["#FFB832","#C61C6F"]),d3.scaleLinear().domain([0,e.length]).range(["#FFB832","#C61C6F"])),u=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return"<strong>"+s+":</strong> <span> "+t[s]+" </span>"});t.call(u);var p=d3.scaleLinear().domain([0,d3.max(e,function(t){return t[s]})]).range([o,0]),h=d3.axisLeft(p).ticks(10),g=d3.axisBottom(c),f=t.selectAll("rect").data(e);f.enter().append("rect").merge(f).style("fill",function(t,e){return d(e)}).attr("width",function(t){return c.bandwidth()}).attr("height",0).attr("x",function(t){return c(t[a])}).attr("y",o).on("mouseover",u.show).on("mouseout",u.hide).transition().attr("height",function(t){return l(t[s])}).attr("y",function(t){return o-l(t[s])}).delay(function(t,e){return 20*e}).duration(1e3),h(this.xAxis),g(this.yAxis),f.exit().remove()},t}();t.CdBarChartService=n,e.module("cedrus.ui.components.chart").service("barChartService",n)}(s||(s={}));var s,c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.getMaxY=function(t,e,n){var i=this;if(e.axes.y.max)return e.axes.y.max;var o=[];return e.series&&e.series.forEach(function(e,r){var a=e.yKey?i.createAccessor(e.yKey):n;if(e.visible!==!1){var s=t[e.dataset];s&&o.push(d3.max(s,function(t){return parseInt(a(t))}))}}),d3.max(o)},e.prototype.getMinY=function(t,e,n){return e.axes.y.min?e.axes.y.min:0},e.prototype.getMaxX=function(t,e,n){if(e.axes.max)return e.axes.max;var i=[];return e.series&&e.series.forEach(function(e,o){if(e.visible!==!1){var r=t[e.dataset];r&&i.push(d3.max(r,function(t){return n(t)}))}}),d3.max(i)},e.prototype.getMinX=function(t,e,n){if(e.axes.min)return e.axes.min;var i=[];return e.series&&e.series.forEach(function(e,o){if(e.visible!==!1){var r=t[e.dataset];r&&i.push(d3.min(r,function(t){return n(t)}))}}),d3.min(i)},e.prototype.createAxes=function(t,e,n,i){var o={bottom:d3.axisBottom,top:d3.axisTop,left:d3.axisLeft,right:d3.axisRight},r=o[n]().scale(t);return e.axes[i].ticks&&(r=r.ticks(e.axes[i].ticks)),e.axes[i].tickFormat&&(r=r.tickFormat(e.axes[i].tickFormat)),r},e.prototype.definePosition=function(t,e,n){function i(e,i){var r=0,a=o(i);return"bottom"===e&&(n.attr("viewBox","0 0 "+t.width+" "+(t.height+a)),r=t.height),"top"===e&&(r=-1*a,n.attr("viewBox","0 "+r+" "+t.width+" "+(t.height+a))),r}function o(e){var n=e.legendRectSize+2*e.legendSpacing;return t.series?t.series.length*n:n}var r=t.legend.tickSize||4,a=t.legend.position?t.legend.position:"bottom",s=0,l=t.legend.vOffset||0,c=t.legend.hOffset||0;e.positionDetails={xAxisVerticalShift:t.height-this.padding+r,xAxisHorizontalShift:0,yAxisVerticalShift:0,yAxisHorizontalShift:this.padding,legendHorizontalShift:c+this.padding,legendVerticalShift:i(a,this)+l,yRangeMax:s?this.padding:this.legendRectSize+this.legendSpacing}},e.prototype.drawLegend=function(t,e,n,i){function o(t,e){t.append("text").text(function(t){return t.label}).attr("x",e.legendRectSize+2*e.legendSpacing).attr("y",e.legendRectSize)}function r(t,e){t.append("rect").attr("width",e.legendRectSize).attr("height",e.legendRectSize).attr("stroke",function(t){return t.color}).attr("fill",function(t){return t.color}).attr("x",0).attr("y",0)}if(t.attr("transform",function(){return"translate("+i.positionDetails.legendHorizontalShift+","+i.positionDetails.legendVerticalShift+")"}),n.legend.enabled===!1)return void t.selectAll(".legend").attr("style","display: none;");var a=this.legendRectSize+2*this.legendSpacing;t=t.selectAll(".legend").attr("style","display: block;"),t.data(n.series).enter().append("g").attr("class","legend").attr("transform",function(t,e,n){var i=a,o=e*i,r=0;return"translate("+r+","+o+")"}),n.legend.events&&t.call(this.attachListenters,n.legend.events,n.events.bind),t.call(r,this).call(o,this)},e.prototype.prepareOptions=function(t,e,n,i){var o=i.xAxis?t.select(".xAxis"):t.append("g").attr("class","xAxis");i.xAxis=o.attr("transform","translate("+i.positionDetails.xAxisHorizontalShift+","+i.positionDetails.xAxisVerticalShift+")");var r=i.yAxis?t.select(".yAxis"):t.append("g").attr("class","yAxis");if(i.yAxis=r.attr("transform","translate("+i.positionDetails.yAxisHorizontalShift+", "+i.positionDetails.yAxisVerticalShift+")"),n.legend.enabled!==!1){var a=i.legend?t.select(".legendGroup"):t.append("g").attr("class","legendGroup");i.legend=a.attr("transform",function(t,e){var n=i.positionDetails.legendHorizontalShift,o=i.positionDetails.legendVerticalShift;return"translate("+n+","+o+")"})}i.dotSets||(i.dotSets=[]),i.paths||(i.paths=[]),n.series.forEach(function(e,n){i.paths[n]||(i.paths[n]=t.append("path").attr("class","line"+n)),i.dotSets[n]||(i.dotSets[n]=t.append("g").attr("class","circles"+n))})},e.prototype.drawSeries=function(t,e,n,i,o){function r(t){"none"!==n.animation.type&&t.delay(n.animation.delay||0).duration(n.animation.duration||250)}function a(t){t.attr("d",i.lineFun(c)(e)).attr("stroke",l.color).attr("fill","none")}function s(t){t.attr("cx",function(t,e,n){return i.xScale(i.xAccessor(t,e,n))}).attr("cy",function(t,e,n){return i.yScale(c(t,e,n))}).attr("fill",l.color).attr("stroke",l.color).attr("r",l.dotSize||2.5),l.drawDots===!1&&t.attr("style","opacity:0;").attr("r",5)}var l=n.series[o],c=(i.xAccessor,l.yKey?this.createAccessor(l.yKey):i.yAccessor);n.tooltip.enabled!==!1&&(i.tip=this.createTooltip(t,n,i,c));var d=t.select(".line"+o);"none"!==n.animation.type&&(d=d.transition()),d.call(r).call(a);var u=t.select(".circles"+o).selectAll("circle").data(e);u.exit().remove(),u=u.enter().append("circle").merge(u),u.call(s).call(this.attachListenters,this.events,n.events.bind)},e.prototype.draw=function(t,e,n,i){n.events||(n.events={}),i.xAccessor=this.createAccessor(n.axes.x.key,"xAxis accessor"),i.yAccessor=this.createAccessor(n.axes.y.key,"yAxis accessor"),this.drawLegend(i.legend,e,n,i);var o=this.getMinY(e,n,i.yAccessor),r=this.getMaxY(e,n,i.yAccessor),a=this.getMinX(e,n,i.xAccessor),s=this.getMaxX(e,n,i.xAccessor),l=n.axes.x.scaleType?this.scaleMap[n.axes.x.scaleType]:d3.scaleLinear();i.xScale=l.domain([a,s]).range([i.positionDetails.xAxisHorizontalShift+this.padding,n.width-this.padding]);var c=n.axes.y.scaleType?this.scaleMap[n.axes.y.scaleType]:d3.scaleLinear();i.yScale=c.domain([o,r]).range([i.positionDetails.xAxisVerticalShift,i.positionDetails.yRangeMax]),i.lineFun=function(t){return d3.line().x(function(t,e,n){return i.xScale(i.xAccessor(t,e,n))}).y(function(e,n,o){return i.yScale(t(e,n,o))}).curve(d3.curveLinear)};var d=this.createAxes(i.xScale,n,"bottom","x"),u=this.createAxes(i.yScale,n,"left","y");t.select(".xAxis").call(d),t.select(".yAxis").call(u)},e}(t.DrawService);t.CdLineChartService=n,e.module("cedrus.ui.components.chart").factory("lineChartService",function(){return new n})}(s||(s={}));var s,c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){var n=function(t){function e(){return t.call(this)||this}return c(e,t),e.prototype.prepareOptions=function(t,e,n,i){var o=this.createAccessor(n.countProperty,"countProperty"),r=i.positionDetails;i.pieGroup=i.pieGroup||t.append("g").attr("transform","translate("+r.pieHorizontalShift+","+r.pieVerticalShift+")"),i.pie=i.pie||d3.pie().value(function(t){return o(t)}).sort(function(t,e){return o(e)-o(t)}),i.arc=i.arc||d3.arc().innerRadius(r.innerRadius).outerRadius(r.radius),i.color=i.color||n.color||d3.scaleOrdinal(d3.schemeCategory20),i.legend=i.legend||t.append("g").attr("class","legendGroup").attr("transform",function(){return"translate("+r.legendHorizontalShift+","+r.legendVerticalShift+")"})},e.prototype.definePosition=function(t,e,n){function i(t,e){return"bottom"===t.legend.position?(e.attr("viewBox","0 0 "+t.width+" "+(20+t.height+a())),t.height+20):"center"===t.legend.position?o():"right"===t.legend.position?o():t.legend.position&&"left"!==t.legend.position?"top"===t.legend.position?(e.attr("viewBox","0 "+-1*(20+t.height)+" "+t.width+" "+(20+2*t.height)),-1*(20+a())):void 0:o()}function o(){return s-(s-l)/Math.sqrt(2)}function r(t,e){if(t.legend&&t.legend.enabled!==!1){if(!t.legend.position||"left"===t.legend.position)return e.attr("viewBox",-1*a()+" 0 "+(t.width+a())+" "+t.height),-1*a();if("right"===t.legend.position)return e.attr("viewBox","0 0 "+(t.width+a())+" "+t.height),t.width-20}return s-(s-l)/Math.sqrt(2)}function a(){return 2*(s-l)/Math.sqrt(2)}var s=Math.min(t.width,t.height)/2,l=t.donutWidth||t.height/5;e.positionDetails={radius:s,donutWidth:l,innerRadius:s-l,pieVerticalShift:t.height/2,pieHorizontalShift:t.width/2,legendHorizontalShift:r(t,n),legendVerticalShift:i(t,n),legendWidth:a()}},e.prototype.drawLegend=function(t,e,n,i){function o(t,e){t.select("text").attr("x",d+c).attr("y",d-c/2).text(function(t,e,n){return i.labelAccessor(t,e,n)}).call(function(t){var e=t._groups[0];h=d3.max(e,function(t){return t.getBBox().width})})}function r(t,e){t.select("rect").attr("width",d).attr("height",d).style("fill",function(t,e,n){return i.color(i.labelAccessor(t,e,n))}).style("stroke",function(t,e,n){return i.color(i.labelAccessor(t,e,n))})}function a(t,e){t.attr("transform",function(t,e){var n=d+c,o=(i.positionDetails.legendWidth-(h+d))/2,r=e*n+c;return"translate("+o+","+r+")"})}if(n.legend||(n.legend={}),n.legend.enabled!==!1){var s=2*i.positionDetails.innerRadius/Math.sqrt(2),l=s/e.length,c=l/3,d=l-c,u=i.legend.selectAll("g.legend").data(e);u.exit().remove();var p=u.enter().append("g").attr("class","legend");p.append("rect"),p.append("text"),u=p.merge(u);var h;n.legend.events&&u.call(this.attachListenters,n.legend.events,n.events.bind),u.call(o,this).call(r,this).call(a,this)}},e.prototype.drawSeries=function(t,e,n,i){function o(t){t.attr("fill",function(t,e){return i.color(i.labelAccessor(t.data,e))}).attr("stroke",function(t,e){return i.color(i.labelAccessor(t.data,e))})}function r(t){if(n.animation||(n.animation={}),"none"!==n.animation){var e=t.transition();n.animation.duration&&e.duration(n.animation.duration),n.animation.delay&&e.delay(n.animation.delay),e.attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return i.arc(e(t))}})}}this.drawLegend(t,e,n,i);var a=i.pieGroup.selectAll("path").data(i.pie(e));a.exit().remove(),a=a.enter().append("path").merge(a),a.call(r).call(o),n.events&&a.call(this.attachListenters,this.events,n.events.bind)},e.prototype.draw=function(t,e,n,i){i.countAccessor=this.createAccessor(n.countProperty,"countProperty"),i.labelAccessor=this.createAccessor(n.labelProperty,"labelProperty"),n.events||(n.events={}),(n.tooltip&&n.tooltip.enabled!==!1||!n.tooltip)&&(i.tip=this.createTooltip(t,n,i,i.countAccessor))},e}(t.DrawService);t.CdPieChartService=n,e.module("cedrus.ui.components.chart").factory("pieChartService",function(){return new n})}(s||(s={}));var a;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){var i=function(){function t(t,e){this.$q=t,this.$element=e,this.today=new Date,this.defaultOptions={useDateRange:!1,layout:"row",hideIcons:n,toggleLink:{show:!0,align:"left"},startDate:{min:!1,rangePlaceholder:"Date From",singleDatePlaceholder:"Date"},endDate:{max:!1,placeholder:"Date To"},errorMessages:{startRequired:"Date From is required when using a date range.",endRequired:"Date To is required when using a date range."}}}return t.$inject=["$q","$element"],t.prototype.$onInit=function(){e.extend({},this.ngModel.$modelValue);this.$startInputContainer=this.$element.find(".startDate"),this.options=e.extend({},this.defaultOptions,this.options),this.form&&(this.parentForm=this.form.$$parentForm),this.parentFormSubmitted=!1,this.useDateRange=!!this.options.useDateRange},t.prototype.$onChanges=function(t){t.ngModel&&t.ngModel.isFirstChange()&&("object"!=typeof t.ngModel.currentValue||Array.isArray(t.ngModel.currentValue))&&console.error("ngModel needs to be an empty object or with these properties {startDate, endDate}")},t.prototype.dateChanged=function(){this.ngChange&&this.ngChange()},t.prototype.toggleDateRange=function(t){this.useDateRange?(this.useDateRange=!1,this.endDate=n,t.startDate.$setPristine(),t.$$parentForm.$submitted=!1,this.ngModel.$modelValue.endDate=null,t.endDate.$setPristine(),this.$startInputContainer.removeClass("md-datepicker-invalid")):this.useDateRange=!0},t.prototype.getToggleDateRangeText=function(t){return t?"Use Single Date":"Use Date Range"},t.prototype.startPlaceholder=function(t){return t?this.options.startDate.rangePlaceholder:this.options.startDate.singleDatePlaceholder},t.prototype.formOnChange=function(t){t&&this.parentForm&&(this.parentFormSubmitted=this.parentForm.$submitted)},t.prototype.shouldRequire=function(t,e){return t&&e},t}();i.$inject=["$q","$element"],e.module("cedrus.ui.components.dateRangePicker").controller("CdDateRangePicker",i)}(i=t.dateRangePicker||(t.dateRangePicker={}))}(i=t.components||(t.components={}))}(i=t.ui||(t.ui={}))}(a||(a={}));var l;!function(t){var n=function(){function t(){this.groupDataKeys=[],this.groupData={},this.totalKeys=0,this.expandedField=[],this.groups={},this.groupKeys=[],this.dataLength=this.data.length}return t.prototype.$onInit=function(){this.options.colors&&this.options.colors.list?this.colors=this.options.colors.list:this.colors=["red","blue","lightblue","grey","black"],this.generateGroups()},t.prototype.getColor=function(t,e){return e=e.toLowerCase(),this.options.colors&&this.options.colors.bindings&&this.options.colors.bindings[e]?this.options.colors.bindings[e]:this.colors[t%this.colors.length]},t.prototype.expandField=function(t){return this.expandedField.indexOf(t)!==-1},t.prototype.setExpandedField=function(t,e){e?this.expandedField.splice(this.expandedField.indexOf(t),1):this.expandedField.push(t)},t.prototype.generateGroups=function(){this.data.forEach(function(t,e){if(t[this.options.groupingField]){var n;n=this.options.transform?this.options.transform(t):t[this.options.groupingField],this.groups[n]||(this.groups[n]=[]),this.groups[n].push(t),this.totalKeys++}}.bind(this)),this.groupKeys=Object.keys(this.groups),e.copy(this.groupKeys,this.groupDataKeys),e.copy(this.groups,this.groupData)},t.prototype.showData=function(){return this.data.length!==this.dataLength&&this.generateGroups(),this.dataLength=this.data.length,0!==this.data.length},t}();e.module("cedrus.ui.components.cdGroupedBarChart").controller("groupedBarChartController",n)}(l||(l={}));var a;!function(t){var o;!function(t){var o;!function(t){var o;!function(t){var o=function(){function t(){var t=this;this.classDefaults={group:"cdFilterGroupLevel",filter:"cdFilterFilterLevel",option:"cdFilterOptionLevel"},this.setDefaults=function(){t.filters=e.copy(t.options.defaultFilterOptions),t.filterGroups=e.copy(t.options.defaultFilterGroups);var n={};for(var i in t.filters){n[i]={};for(var o in t.filters[i])if("checkbox"===t.filters[i][o].type)n[i][o]=[];else{var r=t.customFields[t.filters[i][o].type];"object"===r.valuesStoredAs?n[i][o]={}:"array"===r.valuesStoredAs&&(n[i][o]=[])}}t.options.currentFilters=n,t.options.customClasses&&(t.options.customClasses.groupLevel&&"string"==typeof t.options.customClasses.groupLevel&&(t.groupLevelClasses=t.classDefaults.group+" "+t.options.customClasses.groupLevel),t.options.customClasses.filterLevel&&"string"==typeof t.options.customClasses.filterLevel&&(t.filterLevelClasses=t.classDefaults.filter+" "+t.options.customClasses.filterLevel),t.options.customClasses.optionLevel&&"string"==typeof t.options.customClasses.optionLevel&&(t.optionLevelClasses=t.classDefaults.option+" "+t.options.customClasses.optionLevel))},this.changeFilter=function(e,n,o){var r=e.name,a=e.group,s=(e.options,e.options[n]),l=t.options.currentFilters[a][r],c={group:a,filterName:r,updatedOption:s.value,isSelected:s.isSelected};"checkbox"===e.type?t.options.currentFilters[a][r]=i(l,s):t.options.currentFilters[a][r]=t.customFields[e.type].handler(l,s,e),"function"==typeof t.options.filterChanged&&t.options.filterChanged(t.options.currentFilters,c)},this.groupLevelClasses=this.classDefaults.group,this.filterLevelClasses=this.classDefaults.filter,this.optionLevelClasses=this.classDefaults.option}return t.prototype.$onInit=function(){this.setDefaults()},t.prototype.$onChanges=function(t){var e=t&&t.options&&!t.options.isFirstChange(),n=t&&t.customFields&&!t.customFields.isFirstChange();(e||n)&&(this.setDefaults(),"function"==typeof this.options.filterChanged&&this.options.filterChanged(this.options.currentFilters))},t.prototype.toggleExpand=function(t){t.isExpanded===n&&(t.isExpanded=!0),t.isExpanded=!t.isExpanded},t.prototype.processTitle=function(t,e){return"string"==typeof t.title?t.title:"function"==typeof t.title?t.title(t,e):t.value},t}();o.$inject=[];var r;!function(t){t[t.GROUP=0]="GROUP",t[t.FILTER=1]="FILTER",t[t.OPTION=2]="OPTION"}(r||(r={})),e.module("cedrus.ui.components.sidebarFilter").controller("SidebarFilterController",o)}(o=t.sidebarFilter||(t.sidebarFilter={}))}(o=t.components||(t.components={}))}(o=t.ui||(t.ui={}))}(a||(a={}));var d;!function(n){var i=function(){function n(t){this.$filter=t}return n.$inject=["$filter"],n.prototype.s2ab=function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;++i)n[i]=255&t.charCodeAt(i);return e},n.prototype.generateSheet=function(t,e,n){for(var i={},o={s:{c:0,r:0},e:{c:t.headers.length,r:0}},r=0;r<t.headers.length;r++){var a={v:t.headers[r].title,t:"s"},s=XLSX.utils.encode_cell({c:r,r:0});i[s]=a}for(var l=0;l<t.data.length;l++){var c=l+1;o.e.r<c&&(o.e.r=c);for(var d=0;d<t.headers.length;d++){var u={},p=XLSX.utils.encode_cell({c:d,r:c});t.headers[d].type&&(u.t=t.headers[d].type);var h=t.data[l][t.headers[d].key];u.v=null!=h?h:"",i[p]=u}}return i["!cols"]=t.headers.map(function(t){return t.columnWidth||(t.columnWidth=n.columnWidth||15),{wch:t.columnWidth}}),i["!ref"]=XLSX.utils.encode_range(o),{sheetName:e,sheet:i}},n.prototype.generateWorkbook=function(t,n,i){var o=this;i||(i={}),i=e.extend({bookType:"xlsx",bookSST:!1,type:"binary"},i);var r={Sheets:{},Props:{},SSF:{},SheetNames:[]};Array.isArray(t)||(t=[t]),t.forEach(function(t,e){var n=t.sheetName||"sheet "+e,a=o.generateSheet(t,n,i);r.SheetNames.push(a.sheetName),r.Sheets[a.sheetName]=a.sheet}),this.exportWorkbook(r,i,n)},n.prototype.exportWorkbook=function(t,e,n){t=XLSX.write(t,e),t=this.s2ab(t);var i=new Blob([t]);this.saveAs(i,n)},n.prototype.saveAs=function(e,n){var i=document.createElement("a"),o=t.URL.createObjectURL(e);document.body.appendChild(i),i.setAttribute("style","display: none"),i.href=o,i.download=n,i.click(),t.URL.revokeObjectURL(o),document.body.removeChild(i)},n}();i.$inject=["$filter"],e.module("cedrus.ui.components.export",[]).service("cdWorksheetExportService",i)}(d||(d={})),e.module("cedrus.ui").run(["$templateCache",function(t){t.put("components/calendar/calendar.tpl.html",'<div class="container"><div class="hider" ng-click="vm.displayCal()" ng-show="vm.showCal"></div><div class="input-blocker" ng-click="vm.displayCal()" readonly="true"></div><input type="text" class="md-select" ng-model="vm.selection"><div ng-show="vm.showCal" class="panel"><div class="md-whiteframe-2dp"><div class="yearrow" layout="row" layout-align="space-between end"><md-button class="calbtn" ng-click="vm.setYear(-1)" ng-hide="vm.yearSel" aria-label="previous year"><i class="fa fa-chevron-left"></i></md-button><md-button class="calbtn" ng-click="vm.setYear(-12)" ng-show="vm.yearSel" aria-label="go back one page"><i class="fa fa-chevron-left"></i></md-button><md-button class="calbtn yearbtn" ng-click="vm.flipCal()" aria-label="swap between month and year select">{{vm.date.selYear || vm.initYear}}</md-button><md-button class="calbtn" ng-click="vm.setYear(1)" ng-hide="vm.yearSel" aria-label="next year"><i class="fa fa-chevron-right"></i></md-button><md-button class="calbtn" ng-click="vm.setYear(12)" ng-show="vm.yearSel" aria-label="go forward by one page"><i class="fa fa-chevron-right"></i></md-button></div><div layout="row" ng-repeat="monthRow in vm.monthMap" ng-hide="vm.yearSel"><md-button class="calbtn monthSelect" ng-repeat="month in monthRow" ng-click="vm.setMonth(month.value)" aria-label="choose {{month.value}}">{{month.display}}</md-button></div><div layout="row" ng-repeat="yearRow in vm.yearMap" ng-show="vm.yearSel"><md-button class="calbtn yearSelect" ng-repeat="year in yearRow" ng-click="vm.flipCal(); vm.setYear(year)" aria-label="choose {{year}}">{{(vm.date.selYear||vm.initYear)+year}}</md-button></div></div></div></div>'),t.put("components/date-range-picker/date-range-picker.tpl.html",'<div class="cd-date-range-picker" layout="column"><div ng-form="vm.form" class="ng-cloak" layout="{{ ::vm.options.layout }}"><md-datepicker name="startDate" ng-model="vm.ngModel.$modelValue.startDate" ng-required="vm.shouldRequire(vm.useDateRange, vm.ngModel.$modelValue.endDate)" md-placeholder="{{ vm.startPlaceholder(vm.useDateRange) }}" md-min-date="vm.options.startDate.min || false" md-max-date="vm.ngModel.$modelValue.endDate || vm.options.startDate.max || false" ng-change="vm.dateChanged()" class="startDate" ng-class="{\n                        \'hide-all\' : vm.options.hideIcons == \'all\',\n                        \'hide-calendar\' : vm.options.hideIcons == \'calendar\',\n                        \'hide-triangle\' : vm.options.hideIcons == \'triangle\'\n                    }"></md-datepicker><md-datepicker name="endDate" ng-model="vm.ngModel.$modelValue.endDate" ng-required="vm.shouldRequire(vm.useDateRange, vm.ngModel.$modelValue.startDate)" ng-show="vm.useDateRange" md-placeholder="{{ vm.options.endDate.placeholder }}" md-min-date="vm.ngModel.$modelValue.startDate" md-max-date="vm.options.endDate.max" ng-change="vm.dateChanged()" class="endDate" ng-class="{\n                        \'hidden\': !vm.useDateRange,\n                        \'hide-all\' : vm.options.hideIcons == \'all\',\n                        \'hide-calendar\' : vm.options.hideIcons == \'calendar\',\n                        \'hide-triangle\' : vm.options.hideIcons == \'triangle\'\n                    }" ng-cloak></md-datepicker></div><span flex><a ng-if="(vm.options.toggleLink) ? vm.options.toggleLink.show : true" class="toggle-link" ng-class="{ \'float-right\':  vm.options.toggleLink.align == \'right\',\n                               \'float-left\':  vm.options.toggleLink.align == \'left\'}" ng-click="vm.toggleDateRange(vm.form)">{{ vm.getToggleDateRangeText(vm.useDateRange) }}</a></span><div class="error-div" ng-if="vm.useDateRange && vm.form.$error && vm.parentFormSubmitted"><span ng-if="vm.form.startDate.$error.required">{{ vm.options.errorMessages.startRequired }} </span><span ng-if="vm.form.endDate.$error.required">{{ vm.options.errorMessages.endRequired }}</span></div></div>'),
t.put("components/grouped-bar-chart/grouped-bar-chart.tpl.html",'<div class="cd-grouped-bar-chart"><div ng-hide="vm.showData()"><div layout="row" layout-fill layout-align="center center" class="no-data"><span>There are no active tasks.</span></div></div><div ng-show="vm.showData()"><div ng-repeat="group in vm.groupDataKeys"><div layout="row" class="group-item"><div layout="column"><md-icon ng-hide="vm.expandField(group)" md-font-icon="fa fa-caret-right" ng-click="vm.setExpandedField(group)" ng-if="vm.options.subFields"></md-icon><md-icon ng-show="vm.expandField(group)" md-font-icon="fa fa-caret-down" ng-click="vm.setExpandedField(group, true)" ng-if="vm.options.subFields"></md-icon></div><div layout="column" flex><div layout="row" layout-align="space-around none"><div flex="60" layout-align="start center">{{group}}</div><div flex="20">Count: {{vm.groupData[group].length}}</div><div flex="20">{{vm.groupData[group].length*100/vm.totalKeys | number:0}}%</div></div></div></div><div layout="row" flex class="line-color"><div ng-style="{width:vm.groupData[group].length*100/vm.totalKeys + \'%\', \'background\': vm.getColor($index, group)}" class="red-line"></div></div><div class="data-container" ng-show="vm.expandField(group)"><div layout="column" ng-show="vm.expandField(group)" ng-if="vm.options.subFields"><div ng-repeat="el in vm.groupData[group]"><div ng-include="vm.options.extendedTemplate || \'lineChartSingleItemExpanded\'"></div></div></div></div></div><div layout="row" layout-align="end none" class="total">Total Count:{{vm.totalKeys}}</div></div></div><script type="text/ng-template" id="lineChartSingleItemExpanded"><div class="panel" layout="column" layout-align="center none">\n        <div layout="row" layout-align="space-between none" class="data-row">\n            <div ng-repeat="(field, displayText ) in vm.options.subFields">\n                <span class="bold-text">{{displayText}}</span>\n                <span>{{el[field]}}</span>\n            </div>\n        </div>\n    </div></script>'),t.put("components/sidebar-filter/sidebar-filter.tpl.html",'<!--implemenation for user provided custom type/templates--><!--change naming to filter-tree, side-filter towards end--><div class="cd-sidebar-filter"><div ng-repeat="group in vm.filterGroups track by $index" ng-class="(vm.groupLevelClasses + (group.customClass ? \' \' + group.customClass : \'\') )"><div ng-if="!vm.options.isFlat"><md-button ng-click="vm.toggleExpand(group)" class="md-icon-button" aria-label="expand"><md-icon md-font-set="fa" md-font-icon="fa-chevron-right" ng-class="(group.isExpanded  !== false )? \'fa-chevron-down\': \'fa-chevron-right\'"></md-icon></md-button><span>{{ ::vm.processTitle(group, 0) }}</span></div><ul ng-show="group.isExpanded !== false" layout="column" ng-repeat="(filterName, filter) in vm.filters[group.key] track by filterName" ng-class="(vm.filterLevelClasses + (filter.customClass ? \' \' + filter.customClass : \'\'))" ng-class="{ cdFilterFlat : vm.options.isFlat}"><li><div><md-button ng-click="vm.toggleExpand(filter)" class="md-icon-button" aria-label="expand"><md-icon md-font-set="fa" md-font-icon="fa-chevron-right" ng-class="(filter.isExpanded  !== false )? \'fa-chevron-down\': \'fa-chevron-right\'"></md-icon></md-button><span>{{::vm.processTitle(filter, 1)}}</span><ul ng-show="filter.isExpanded !== false"><div ng-if="filter.type === \'checkbox\'" ng-include="\'cdCheckBoxFilter\'"></div><div ng-if="filter.type !== \'checkbox\'" ng-include="vm.customFields[filter.type].template"></div></ul></div></li></ul></div></div><script type="text/ng-template" id="cdCheckBoxFilter"><li ng-repeat="(optionName, option) in filter.options track by optionName" ng-class="(vm.optionLevelClasses + (option.customClass ? \' \' + option.customClass : \'\'))">\n        <md-checkbox ng-model="option.isSelected" ng-change="vm.changeFilter(filter, optionName, $index)" class="md-primary" ng-model-options="{debounce: 250}"\n            aria-label="{{::vm.processTitle(option, 2)}}">\n            <span>{{::vm.processTitle(option, 2)}}</span>\n        </md-checkbox>\n    </li></script>')}])}(window,window.angular),window.cedrusUI={version:{full:"0.3.6"}};