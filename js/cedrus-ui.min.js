/*!
 * Cedrus UI
 * https://github.com/cedrusco/cedrus-ui
 * @license Copyright Cedrus 2015-2016
 * v0.2.9
 */
!function(t,e,i){"use strict";function n(t,e){if(e.isSelected)t.push(e.value);else{var i=t.indexOf(e.value);i>-1&&t.splice(i,1)}return t}e.module("cedrus.ui",["ngMaterial","ngAnimate","cedrus.ui.core","cedrus.ui.components.calendar","cedrus.ui.components.cdChart","cedrus.ui.components.cdGroupedBarChart","cedrus.ui.components.sidebarFilter","cedrus.ui.components.constant"]);var r;!function(t){e.module("cedrus.ui.core",["ngMaterial"])}(r||(r={}));var r;!function(t){function i(t,e,i){e.setDefaultDateFormat("MM/dd/yyyy")}i.$inject=["$provide","$cedrusUIConfigProvider","$mdThemingProvider"],e.module("cedrus.ui.core").config(i)}(r||(r={}));var r;!function(t){function i(t,e){function i(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}var n=e?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return t?t.replace(n,i):""}e.module("cedrus.ui.core").filter("capitalize",function(){return i})}(r||(r={}));var r;!function(t){var i=function(){function t(){this.CSS={SAMPLE:"1"}}return t}();e.module("cedrus.ui.core").factory("$cedrusConstant",function(){return new i})}(r||(r={}));var r;!function(t){function i(t,e){var i=t.replace(/([a-z])([A-Z])/g,"$1 $2");return i}e.module("cedrus.ui.core").filter("normalizeCamelCase",function(){return i})}(r||(r={}));var r;!function(t){var i=function(){function t(){this._UI_DEFAULT_DATE_FORMAT="MM/dd/yyyy",this.dateFormat=this._UI_DEFAULT_DATE_FORMAT}return t.prototype.$get=function(){return{getDateFormat:this.getDefaultDateFormat}},t.prototype.setDefaultDateFormat=function(t){this.dateFormat=t||this._UI_DEFAULT_DATE_FORMAT},t.prototype.getDefaultDateFormat=function(){return this.dateFormat||this._UI_DEFAULT_DATE_FORMAT},t}();t.UIConfigProvider=i,e.module("cedrus.ui.core").provider("$cedrusUIConfig",i)}(r||(r={}));var r;!function(i){var n=function(){function i(){this.isDebug=!0,this.now=t.performance?e.bind(t.performance,t.performance.now):Date.now||function(){return(new Date).getTime()}}return i.prototype.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];t.isDebug&&console.debug.apply(console,["Cedrus UI:"].concat(e))},i.prototype.time=function(t){var e=this.now();return t(),this.now()-e},i}();e.module("cedrus.ui.core").factory("$cedrusUtil",function(){return n})}(r||(r={}));var o;!function(t){var i=function(){function t(){this.templateUrl="components/calendar/calendar.tpl.html",this.controllerAs="vm",this.controller="CalendarController",this.bindings={options:"="},this.require={ngModel:"ngModel"}}return t}();t.CalendarComponent=i,e.module("cedrus.ui.components.calendar",[]).component("cdCalendar",new i)}(o||(o={}));var a;!function(t){var i=function(){function t(t,i){this.$element=t,this.$injector=i,this.defaultOptions={width:360,height:360},this.drawSettings={},this.chartTypes={pieChart:"pieChartService",lineChart:"lineChartService"},this.options=e.merge({},this.defaultOptions,this.options),this.width=this.options.width,this.height=this.options.height,this.element=d3.select(this.$element[0]).select("svg").attr("width",this.width).attr("height",this.height),this.chartTypes[this.options.chartType]?this.chartService=this.$injector.get(this.chartTypes[this.options.chartType]):"custom"===this.options.chartType?(this.chartService=this.$injector.get(this.options.customChartService),this.chartService||console.warn("No custom chart service provided for custom chart type")):console.warn("Service for chart type: "+this.options.chartType+" not found")}return t.prototype.$onInit=function(){this.drawChart(!0)},t.prototype.$onChanges=function(t){var e=!!t.options;this.drawChart(e)},t.prototype.drawChart=function(t){var e=this;t&&(this.chartService.mergeEvents(this.options),this.chartService.definePosition(this.options,this.drawSettings),this.chartService.prepareOptions(this.element,this.data,this.options,this.drawSettings)),this.chartService.draw(this.element,this.data,this.options,this.drawSettings),this.options.series.forEach(function(t,i){var n=t.visible!==!1,r=n?e.data[t.dataset]:[];e.chartService.drawSeries(e.element,r,e.options,e.drawSettings,t,i)})},t.$inject=["$element","$injector"],t}(),n=function(){function t(){this.bindings={data:"<",options:"<"},this.template="<svg></svg>",this.controller=i,this.controllerAs="vm"}return t}();e.module("cedrus.ui.components.cdChart",[]).component("cdChart",new n);var r=function(){function t(){this.padding=20,this.legendRectSize=12,this.legendSpacing=4,this.scaleMap={linear:d3.scaleLinear(),log:d3.scaleLog(),ordinal:d3.scaleOrdinal()}}return t.prototype.mergeEvents=function(t){if(t){var e={mouseout:[],mouseover:[]};t.events&&Object.keys(t.events).forEach(function(i){"bind"!==i&&(e[i]||(e[i]=[]),e[i].push(t.events[i]))}),this.events=e}},t.prototype.createTooltip=function(t,e,i,n){n=e.tooltip.customText?this.createAccessor(e.tooltip.customText,"tooltip data accessor"):n;var r=d3.tip();r.attr("class","cd-chart d3-tip"),r.html(function(t){return n(t)}),e.tooltip.position&&r.direction(e.tooltip.position),t.call(r),i.tip=r,this.events.mouseover.push(i.tip.show),this.events.mouseout.push(i.tip.hide)},t.prototype.createAccessor=function(t,e){return t||console.warn("Must Provide a Key for property: "+e),"function"==typeof t?function(e,i,n){return t(e,i,n)}:function(e){return e[t]}},t.prototype.attachListenters=function(t,i,n){var r=Object.keys(i);r.forEach(function(r){t.on(r,function(t,o,a){var s=this,c=e.copy(d3.event);Array.isArray(i[r])||(i[r]=[i[r]]),i[r].forEach(function(e){n?e.bind(s)(t,o,a,c):e(t,o,a,c)})})})},t.$inject=["$scope"],t}();t.DrawService=r}(a||(a={}));var s;!function(t){var i=function(){function t(){this.bindings={data:"=",options:"="},this.templateUrl="components/grouped-bar-chart/grouped-bar-chart.tpl.html",this.controller="groupedBarChartController",this.controllerAs="vm",this.transclude=!0}return t}();e.module("cedrus.ui.components.cdGroupedBarChart",[]).component("cdGroupedBarChart",new i)}(s||(s={}));var c;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){var i=function(){function t(){this.templateUrl="components/sidebar-filter/sidebar-filter.tpl.html",this.controllerAs="vm",this.controller="SidebarFilterController",this.bindings={options:"<",customFields:"<?"}}return t}();e.module("cedrus.ui.components.sidebarFilter",[]).component("cdSidebarFilter",new i)}(i=t.sidebarFilter||(t.sidebarFilter={}))}(i=t.components||(t.components={}))}(i=t.ui||(t.ui={}))}(c||(c={}));var o;!function(t){var i=function(){function t(t){this.$element=t,this.yearMap=[[-4,-3,-2],[-1,0,1],[2,3,4],[5,6,7]],this.monthMap=[[{display:"Jan",value:"January"},{display:"Feb",value:"February"},{display:"Mar",value:"March"}],[{display:"Apr",value:"April"},{display:"May",value:"May"},{display:"Jun",value:"June"}],[{display:"Jul",value:"July"},{display:"Aug",value:"August"},{display:"Sep",value:"September"}],[{display:"Oct",value:"October"},{display:"Nov",value:"November"},{display:"Dec",value:"December"}]]}return t.prototype.$onInit=function(){this.initYear=(new Date).getFullYear(),this.date={selYear:this.initYear,selMonth:""},this.showCal=!1},t.prototype.$postLink=function(){this.inputEl=this.$element.find("input"),this.options&&this.options.blockFreeTyping===!0&&this.inputEl.keydown(function(t){t.preventDefault()})},t.prototype.displayCal=function(){this.showCal=!this.showCal,this.showCal&&this.inputEl.focus()},t.prototype.flipCal=function(){this.yearSel=!this.yearSel},t.prototype.setYear=function(t){this.date.selYear||(this.date.selYear=this.initYear),this.date.selYear+=t},t.prototype.setMonth=function(t){this.date.selYear||(this.date.selYear=this.initYear),this.date.selMonth=t,this.ngModel.$setViewValue(this.date.selMonth+" "+this.date.selYear),this.ngModel.$render(),this.selection=this.ngModel.$viewValue,this.showCal=!1},t.$inject=["$element"],t}();t.CalendarController=i,e.module("cedrus.ui.components.calendar").controller("CalendarController",i)}(o||(o={}));var a;!function(t){var i=function(){function t(){this.chartBuilt=!1}return t.prototype.draw=function(t,e,i){var n={top:30,right:30,bottom:40,left:80},r=i.height-n.top-n.bottom,o=i.width-n.left-n.right,a=i.xAxisProperty,s=i.yAxisProperty;this.chartBuilt||(t=t.append("g").attr("transform","translate("+n.left+","+n.top+")"),this.xAxis=d3.select("svg").append("g").attr("transform","translate("+n.left+","+n.top+")").attr("class","xAxis"),this.yAxis=d3.select("svg").append("g").attr("transform","translate("+n.left+","+(r+n.top)+")").attr("class","yAxis"),this.chartBuilt=!0);var c=d3.scaleLinear().domain([0,d3.max(e,function(t){return t[s]})]).range([0,r]),l=d3.scaleBand().domain(e.map(function(t){return t[a]})).rangeRound([0,o]).paddingInner(.05).paddingOuter(.05),d=(d3.scaleLinear().domain([0,d3.max(e,function(t){return t[s]})]).range(["#FFB832","#C61C6F"]),d3.scaleLinear().domain([0,e.length]).range(["#FFB832","#C61C6F"])),u=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return"<strong>"+s+":</strong> <span> "+t[s]+" </span>"});t.call(u);var p=d3.scaleLinear().domain([0,d3.max(e,function(t){return t[s]})]).range([r,0]),h=d3.axisLeft(p).ticks(10),f=d3.axisBottom(l),v=t.selectAll("rect").data(e);v.enter().append("rect").merge(v).style("fill",function(t,e){return d(e)}).attr("width",function(t){return l.bandwidth()}).attr("height",0).attr("x",function(t){return l(t[a])}).attr("y",r).on("mouseover",u.show).on("mouseout",u.hide).transition().attr("height",function(t){return c(t[s])}).attr("y",function(t){return r-c(t[s])}).delay(function(t,e){return 20*e}).duration(1e3),h(this.xAxis),f(this.yAxis),v.exit().remove()},t}();t.CdBarChartService=i,e.module("cedrus.ui.components.cdChart").service("barChartService",i)}(a||(a={}));var a;!function(t){var i=function(){function t(){}return t}();t.DrawService=i;var n=function(){function t(t,i){this.$element=t,this.$injector=i,this.drawSettings={},this.chartTypes={pieChart:"pieChartService",lineChart:"lineChartService"},this.defaultOptions={width:360,height:360},this.options=e.merge({},this.defaultOptions,this.options),this.width=this.options.width,this.height=this.options.height,this.element=d3.select(this.$element[0]).select("svg").attr("width",this.width).attr("height",this.height),this.chartTypes[this.options.chartType]?this.chartService=this.$injector.get(this.chartTypes[this.options.chartType]):console.error("Service for chart type: "+this.options.chartType+" not found")}return t.prototype.$onInit=function(){this.drawChart()},t.prototype.$onChanges=function(t){this.drawChart()},t.prototype.drawChart=function(){this.data.length&&this.chartService.draw(this.element,this.data,this.options,this.drawSettings)},t.$inject=["$element","$injector"],t}();e.module("cedrus.ui.components.cdChart").controller("CdChartController",n)}(a||(a={}));var a,l=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};!function(t){var i=function(t){function e(){t.apply(this,arguments)}return l(e,t),e.prototype.getMaxY=function(t,e,i){if(e.axes.y.max)return e.axes.y.max;var n=[];return e.series.forEach(function(e,r){if(e.visible!==!1){var o=t[e.dataset];n.push(d3.max(o,function(t){return parseInt(i(t))}))}}),d3.max(n)},e.prototype.getMinY=function(t,e,i){return e.axes.y.min?e.axes.y.min:0},e.prototype.getMaxX=function(t,e,i){if(e.axes.max)return e.axes.max;var n=[];return e.series.forEach(function(e,r){if(e.visible!==!1){var o=t[e.dataset];n.push(d3.max(o,function(t){return i(t)}))}}),d3.max(n)},e.prototype.getMinX=function(t,e,i){if(e.axes.min)return e.axes.min;var n=[];return e.series.forEach(function(e,r){if(e.visible!==!1){var o=t[e.dataset];n.push(d3.min(o,function(t){return i(t)}))}}),d3.min(n)},e.prototype.createAxes=function(t,e,i,n){var r={bottom:d3.axisBottom,top:d3.axisTop,left:d3.axisLeft,right:d3.axisRight},o=r[i]().scale(t);return e.axes[n].ticks&&(o=o.ticks(e.axes[n].ticks)),e.axes[n].tickFormat&&(o=o.tickFormat(e.axes[n].tickFormat)),o},e.prototype.definePosition=function(t,e){var i=t.legend.tickSize||4,n="top"!==t.legend.vPosition,r="top"!==t.legend.vPosition?this.legendRectSize+this.legendSpacing:0,o=t.legend.vOffset||0,a=t.legend.hOffset||0;e.positionDetails={xAxisVerticalShift:t.height-this.padding+i-r,xAxisHorizontalShift:0,yAxisVerticalShift:0,yAxisHorizontalShift:this.padding,legendHorizontalShift:a,legendVerticalShift:(n?t.height-this.legendRectSize:0)+o,yRangeMax:n?this.padding:this.legendRectSize+this.legendSpacing}},e.prototype.drawLegend=function(t,e,i,n){var r=this;return i.legend.enabled===!1?void t.selectAll(".legend").attr("style","display: none;"):(t=t.selectAll(".legend").attr("style","display: block;").data(i.series).enter().append("g").attr("class","legend").attr("transform",function(t,e,n){var o=(i.width-2*r.padding)/i.series.length,a=2*r.padding+e*o;return"translate("+a+",0)"}),i.legend.events&&t.call(this.attachListenters,i.legend.events,i.events.bind),t.append("rect").attr("width",this.legendRectSize).attr("height",this.legendRectSize).attr("stroke",function(t){return t.color}).attr("fill",function(t){return t.color}).attr("x",0).attr("y",0),void t.append("text").text(function(t){return t.label}).attr("x",this.legendRectSize+this.legendSpacing).attr("y",this.legendRectSize/1.5))},e.prototype.prepareOptions=function(t,e,i,n){var r=n.xAxis?t.select(".xAxis"):t.append("g").attr("class","xAxis");n.xAxis=r.attr("transform","translate("+n.positionDetails.xAxisHorizontalShift+","+n.positionDetails.xAxisVerticalShift+")");var o=n.yAxis?t.select(".yAxis"):t.append("g").attr("class","yAxis");if(n.yAxis=o.attr("transform","translate("+n.positionDetails.yAxisHorizontalShift+", "+n.positionDetails.yAxisVerticalShift+")"),i.legend.enabled!==!1){var a=n.legend?t.select(".legendGroup"):t.append("g").attr("class","legendGroup");n.legend=a.attr("transform",function(t,e){var i=n.positionDetails.legendHorizontalShift,r=n.positionDetails.legendVerticalShift;return"translate("+i+","+r+")"})}n.dotSets||(n.dotSets=[]),n.paths||(n.paths=[]),i.series.forEach(function(e,i){n.paths[i]||(n.paths[i]=t.append("path").attr("class","line"+i)),n.dotSets[i]||(n.dotSets[i]=t.append("g").attr("class","circles"+i))})},e.prototype.drawSeries=function(t,e,i,n,r,o){var a=t.select(".line"+o);"none"!==i.animation.type&&(a=a.transition(),i.animation.delay&&a.delay(i.animation.delay),i.animation.duration&&a.duration(i.animation.duration)),a.attr("d",n.lineFun(e)).attr("stroke",r.color).attr("fill","none");var s=t.select(".circles"+o).selectAll("circle").data(e),c=s.enter().append("circle").merge(s);c.attr("cx",function(t,e,i){return n.xScale(n.xAccessor(t,e,i))}).attr("cy",function(t,e,i){return n.yScale(n.yAccessor(t,e,i))}).attr("fill",r.color).attr("stroke",r.color).attr("r",r.dotSize||2.5).call(this.attachListenters,this.events,i.events.bind),r.drawDots===!1&&c.attr("style","opacity:0;").attr("r",5),s.exit().remove()},e.prototype.draw=function(t,e,i,n){i.events||(i.events={}),n.xAccessor=this.createAccessor(i.axes.x.key,"xAxis accessor"),n.yAccessor=this.createAccessor(i.axes.y.key,"yAxis accessor"),i.tooltip.enabled!==!1&&(n.tip=this.createTooltip(t,i,n,n.yAccessor)),this.drawLegend(n.legend,e,i,n);var r=this.getMinY(e,i,n.yAccessor),o=this.getMaxY(e,i,n.yAccessor),a=this.getMinX(e,i,n.xAccessor),s=this.getMaxX(e,i,n.xAccessor),c=i.axes.x.scaleType?this.scaleMap[i.axes.x.scaleType]:d3.scaleLinear();n.xScale=c.domain([a,s]).range([n.positionDetails.xAxisHorizontalShift+this.padding,i.width-this.padding]);var l=i.axes.y.scaleType?this.scaleMap[i.axes.y.scaleType]:d3.scaleLinear();n.yScale=l.domain([r,o]).range([n.positionDetails.xAxisVerticalShift,n.positionDetails.yRangeMax]),n.lineFun=d3.line().x(function(t,e,i){return n.xScale(n.xAccessor(t,e,i))}).y(function(t,e,i){return n.yScale(n.yAccessor(t,e,i))}).curve(d3.curveLinear);var d=this.createAxes(n.xScale,i,"bottom","x"),u=this.createAxes(n.yScale,i,"left","y");t.select(".xAxis").call(d),t.select(".yAxis").call(u)},e}(t.DrawService);t.CdLineChartService=i,e.module("cedrus.ui.components.cdChart").factory("lineChartService",function(){return new i})}(a||(a={}));var a,l=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};!function(t){var i=function(t){function e(){t.call(this)}return l(e,t),e.prototype.prepareOptions=function(t,e,i,n){var r=this.createAccessor(i.countProperty,"countProperty"),o=n.positionDetails;n.pieGroup=n.pieGroup||t.append("g").attr("transform","translate("+o.pieHorizontalShift+","+o.pieVerticalShift+")"),n.pie=n.pie||d3.pie().value(function(t){return r(t)}).sort(function(t,e){return r(e)-r(t)}),n.arc=n.arc||d3.arc().innerRadius(o.innerRadius).outerRadius(o.radius),n.color=n.color||d3.scaleOrdinal(d3.schemeCategory20),n.legend=n.legend||t.append("g").attr("class","legendGroup").attr("transform",function(){return"translate("+o.legendHorizontalShift+","+o.legendVerticalShift+")"})},e.prototype.definePosition=function(t,e){function i(){return r-(r-o)/Math.sqrt(2)}function n(){return 2*(r-o)/Math.sqrt(2)}var r=Math.min(t.width,t.height)/2,o=t.donutWidth||t.height/5;e.positionDetails={radius:r,donutWidth:o,innerRadius:r-o,pieVerticalShift:t.height/2,pieHorizontalShift:t.width/2,legendHorizontalShift:i(),legendVerticalShift:i(),legendWidth:n()}},e.prototype.drawLegend=function(t,e,i,n){var r=2*n.positionDetails.innerRadius/Math.sqrt(2),o=r/e.length,a=o/3,s=o-a,c=n.legend.selectAll("g.legend").data(e);c.exit().remove();var l=c.enter().append("g").attr("class","legend");l.append("rect"),l.append("text");var d,u=l.merge(c);i.legend.events&&u.call(this.attachListenters,i.legend.events,i.events.bind),u.select("text").attr("x",s+a).attr("y",s-a).text(function(t,e,i){return n.labelAccessor(t,e,i)}).call(function(t){var e=t._groups[0];d=d3.max(e,function(t){return t.getBBox().width})}),u.select("rect").attr("width",s).attr("height",s).style("fill",function(t,e,i){return n.color(n.labelAccessor(t,e,i))}).style("stroke",function(t,e,i){return n.color(n.labelAccessor(t,e,i))}),u.attr("transform",function(t,e){var i=s+a,r=(n.positionDetails.legendWidth-(d+s-a))/2,o=e*i+a;return"translate("+r+","+o+")"})},e.prototype.drawSeries=function(t,e,i,n){this.drawLegend(t,e,i,n);var r=n.pieGroup.selectAll("path").data(n.pie(e));r.exit().remove(),r=r.enter().append("path").merge(r).call(function(t){if("none"!==i.animation){var e=t.transition();i.animation.duration&&e.duration(i.animation.duration),i.animation.delay&&e.delay(i.animation.delay),e.attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n.arc(e(t))}})}}).attr("fill",function(t,e){return n.color(n.labelAccessor(t.data,e))}),i.events&&r.call(this.attachListenters,this.events,i.events.bind)},e.prototype.draw=function(t,e,i,n){n.countAccessor=this.createAccessor(i.countProperty,"countProperty"),n.labelAccessor=this.createAccessor(i.labelProperty,"labelProperty"),i.events||(i.events={}),i.tooltip.enabled!==!1&&(n.tip=this.createTooltip(t,i,n,n.countAccessor))},e}(t.DrawService);t.CdPieChartService=i,e.module("cedrus.ui.components.cdChart").factory("pieChartService",function(){return new i})}(a||(a={}));var c;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){var i=function(){function t(t){var e=this;this.$injector=t,this.restrict="EA",this.scope={name:"@?",key:"@?",replace:"@?"},this.link=function(t,i,n){var r,o="true"===n.replace,a=n.cdConstant||n.name,s=n.key;n.name&&!a&&console.error("constant name is not provided"),a&&(r=e.$injector.get(a),null!=s&&""!==s?r=r[s]:n.key&&console.warn("constant key is defined without a value"),o===!0?i.replaceWith(r):i.text(r))}}return t.$inject=["$injector"],t.factory=function(){function e(e){return new t(e)}return e.$inject=["$injector"],e},t}();e.module("cedrus.ui.components.constant",[]).directive("cdConstant",i.factory())}(i=t.constant||(t.constant={}))}(i=t.components||(t.components={}))}(i=t.ui||(t.ui={}))}(c||(c={}));var s;!function(t){var i=function(){function t(){this.groupDataKeys=[],this.groupData={},this.totalKeys=0,this.expandedField=[],this.groups={},this.groupKeys=[],this.dataLength=this.data.length}return t.prototype.$onInit=function(){this.options.colors&&this.options.colors.list?this.colors=this.options.colors.list:this.colors=["red","blue","lightblue","grey","black"],this.generateGroups()},t.prototype.getColor=function(t,e){return e=e.toLowerCase(),this.options.colors&&this.options.colors.bindings&&this.options.colors.bindings[e]?this.options.colors.bindings[e]:this.colors[t%this.colors.length]},t.prototype.expandField=function(t){return this.expandedField.indexOf(t)!==-1},t.prototype.setExpandedField=function(t,e){e?this.expandedField.splice(this.expandedField.indexOf(t),1):this.expandedField.push(t)},t.prototype.generateGroups=function(){this.data.forEach(function(t,e){if(t[this.options.groupingField]){var i;i=this.options.transform?this.options.transform(t):t[this.options.groupingField],this.groups[i]||(this.groups[i]=[]),this.groups[i].push(t),this.totalKeys++}}.bind(this)),this.groupKeys=Object.keys(this.groups),e.copy(this.groupKeys,this.groupDataKeys),e.copy(this.groups,this.groupData)},t.prototype.showData=function(){return this.data.length!==this.dataLength&&this.generateGroups(),this.dataLength=this.data.length,0!==this.data.length},t}();e.module("cedrus.ui.components.cdGroupedBarChart").controller("groupedBarChartController",i)}(s||(s={}));var c;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){var i,r=function(){function t(){var t=this;this.setDefaults=function(){t.filters=e.copy(t.options.defaultFilterOptions),t.filterGroups=e.copy(t.options.defaultFilterGroups),t.options.currentFilters={};var i={};for(var n in t.filters){i[n]={};for(var r in t.filters[n])if("checkbox"===t.filters[n][r].type)i[n][r]=[];else{var o=t.customFields[t.filters[n][r].type];"object"===o.valuesStoredAs?i[n][r]={}:"array"===o.valuesStoredAs&&(i[n][r]=[])}}t.options.currentFilters=i},this.changeFilter=function(e,i,r){var o=e.name,a=e.group,s=(e.options,e.options[i]),c=t.options.currentFilters[a][o],l={group:a,filterName:o,updatedOption:s.value,isSelected:s.isSelected};"checkbox"===e.type?t.options.currentFilters[a][o]=n(c,s):t.options.currentFilters[a][o]=t.customFields[e.type].handler(c,s,e),t.options.filterChanged(t.options.currentFilters,l)},this.setDefaults()}return t.prototype.toggleExpand=function(t){t.isExpanded=!t.isExpanded},t.prototype.processTitle=function(t,e){return"string"==typeof t.title?t.title:"function"==typeof t.title?t.title(t,e):t.value},t.$inject=[],t}();!function(t){t[t.GROUP=0]="GROUP",t[t.FILTER=1]="FILTER",t[t.OPTION=2]="OPTION"}(i||(i={})),e.module("cedrus.ui.components.sidebarFilter").controller("SidebarFilterController",r)}(i=t.sidebarFilter||(t.sidebarFilter={}))}(i=t.components||(t.components={}))}(i=t.ui||(t.ui={}))}(c||(c={})),e.module("cedrus.ui").run(["$templateCache",function(t){t.put("components/calendar/calendar.tpl.html",'<div class="container"><div class="hider" ng-click="vm.displayCal()" ng-show="vm.showCal"></div><div class="input-blocker" ng-click="vm.displayCal()" readonly="true"></div><input type="text" class="md-select" ng-model="vm.selection"><div ng-show="vm.showCal" class="panel"><div class="md-whiteframe-2dp"><div class="yearrow" layout="row" layout-align="space-between end"><md-button class="calbtn" ng-click="vm.setYear(-1)" ng-hide="vm.yearSel" aria-label="previous year"><i class="fa fa-chevron-left"></i></md-button><md-button class="calbtn" ng-click="vm.setYear(-12)" ng-show="vm.yearSel" aria-label="go back one page"><i class="fa fa-chevron-left"></i></md-button><md-button class="calbtn yearbtn" ng-click="vm.flipCal()" aria-label="swap between month and year select">{{vm.date.selYear || vm.initYear}}</md-button><md-button class="calbtn" ng-click="vm.setYear(1)" ng-hide="vm.yearSel" aria-label="next year"><i class="fa fa-chevron-right"></i></md-button><md-button class="calbtn" ng-click="vm.setYear(12)" ng-show="vm.yearSel" aria-label="go forward by one page"><i class="fa fa-chevron-right"></i></md-button></div><div layout="row" ng-repeat="monthRow in vm.monthMap" ng-hide="vm.yearSel"><md-button class="calbtn monthSelect" ng-repeat="month in monthRow" ng-click="vm.setMonth(month.value)" aria-label="choose {{month.value}}">{{month.display}}</md-button></div><div layout="row" ng-repeat="yearRow in vm.yearMap" ng-show="vm.yearSel"><md-button class="calbtn yearSelect" ng-repeat="year in yearRow" ng-click="vm.flipCal(); vm.setYear(year)" aria-label="choose {{year}}">{{(vm.date.selYear||vm.initYear)+year}}</md-button></div></div></div></div>'),t.put("components/grouped-bar-chart/grouped-bar-chart.tpl.html",'<div class="cd-grouped-bar-chart"><div ng-hide="vm.showData()"><div layout="row" layout-fill layout-align="center center" class="no-data"><span>There are no active tasks.</span></div></div><div ng-show="vm.showData()"><div ng-repeat="group in vm.groupDataKeys"><div layout="row" class="group-item"><div layout="column"><md-icon ng-hide="vm.expandField(group)" md-font-icon="fa fa-caret-right" ng-click="vm.setExpandedField(group)" ng-if="vm.options.subFields"></md-icon><md-icon ng-show="vm.expandField(group)" md-font-icon="fa fa-caret-down" ng-click="vm.setExpandedField(group, true)" ng-if="vm.options.subFields"></md-icon></div><div layout="column" flex><div layout="row" layout-align="space-around none"><div flex="60" layout-align="start center">{{group}}</div><div flex="20">Count: {{vm.groupData[group].length}}</div><div flex="20">{{vm.groupData[group].length*100/vm.totalKeys | number:0}}%</div></div></div></div><div layout="row" flex class="line-color"><div ng-style="{width:vm.groupData[group].length*100/vm.totalKeys + \'%\', \'background\': vm.getColor($index, group)}" class="red-line"></div></div><div class="data-container" ng-show="vm.expandField(group)"><div layout="column" ng-show="vm.expandField(group)" ng-if="vm.options.subFields"><div ng-repeat="el in vm.groupData[group]"><div ng-include="vm.options.extendedTemplate || \'lineChartSingleItemExpanded\'"></div></div></div></div></div><div layout="row" layout-align="end none" class="total">Total Count:{{vm.totalKeys}}</div></div></div><script type="text/ng-template" id="lineChartSingleItemExpanded"><div class="panel" layout="column" layout-align="center none">\n        <div layout="row" layout-align="space-between none" class="data-row">\n            <div ng-repeat="(field, displayText ) in vm.options.subFields">\n                <span class="bold-text">{{displayText}}</span>\n                <span>{{el[field]}}</span>\n            </div>\n        </div>\n    </div></script>'),t.put("components/sidebar-filter/sidebar-filter.tpl.html",'<!--implemenation for user provided custom type/templates--><!--change naming to filter-tree, side-filter towards end--><div class="cd-sidebar-filter"><div ng-repeat="group in vm.filterGroups track by $index" class="cdFilterGroupLevel"><div ng-if="!vm.options.isFlat"><md-button ng-click="vm.toggleExpand(group)" class="md-icon-button" aria-label="expand"><md-icon md-font-set="fa" md-font-icon="fa-chevron-right" ng-class="(group.isExpanded  !== false )? \'fa-chevron-down\': \'fa-chevron-right\'"></md-icon></md-button><span>{{ ::vm.processTitle(group, 0) }}</span></div><ul ng-show="group.isExpanded !== false" layout="column" ng-repeat="(filterName, filter) in vm.filters[group.key] track by filterName" class="cdFilterFilterLevel" ng-class="{ cdFilterFlat : vm.options.isFlat}"><li><div><md-button ng-click="vm.toggleExpand(filter)" class="md-icon-button" aria-label="expand"><md-icon md-font-set="fa" md-font-icon="fa-chevron-right" ng-class="(filter.isExpanded  !== false )? \'fa-chevron-down\': \'fa-chevron-right\'"></md-icon></md-button><span>{{::vm.processTitle(filter, 1)}}</span><ul ng-show="filter.isExpanded !== false"><div ng-if="filter.type === \'checkbox\'" ng-include="\'cdCheckBoxFilter\'"></div><div ng-if="filter.type !== \'checkbox\'" ng-include="vm.customFields[filter.type].template"></div></ul></div></li></ul></div></div><script type="text/ng-template" id="cdCheckBoxFilter"><li ng-repeat="(optionName, option) in filter.options track by optionName" class="cdFilterOptionLevel">\n        <md-checkbox ng-model="option.isSelected" ng-change="vm.changeFilter(filter, optionName, $index)" class="md-primary" ng-model-options="{debounce: 250}"\n            aria-label="{{::vm.processTitle(option, 2)}}">\n            <span>{{::vm.processTitle(option, 2)}}</span>\n        </md-checkbox>\n    </li></script>')}])}(window,window.angular),window.cedrusUI={version:{full:"0.2.9"}};